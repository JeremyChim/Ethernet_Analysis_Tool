# 以太网数据处理工具
这是一个将以太网原始数据转化为udp格式的脚本工具，用于源数据的转换，方便后期的数据分析。     
Github：https://github.com/JeremyChim/Ethernet_Analysis_Tool

## 相关人员
作者：Jer小铭😎   
技术支持：Mavis🤣   
建议提供：少基同学🤪   
思路提供：家文同学😏   
测试验证：少丽同学🤨   
缺陷提出：莲花同学🤓   
开发指导：媛媛同学🤠   
技术指导：坚莲大佬🧐   
 
> 感谢各位同学和大佬的支持。^0^

## 新版本使用方法（v1.0以及更新的版本）
1. 运行.exe文件 
2. 点击浏览，选择log文件
3. 点击生成csv
4. 查看csv文件夹

## 旧版本使用方法（v0.3以及更早的版本）
1. 把日志文件命名为 log.txt 放在根目录 
2. 运行app.py 或者 app.pyw 
3. 查看csv文件夹

## 版本更新

### V2.50
2023.6.30
#### 新增
- config.xlsx 0x17F 新增四个轮速信号配置：WhlSpdFrntLePls、WhlSpdFrntRiPls、WhlSpdReLePls、WhlSpdReRiPls
- flier.py 0x17F信号过滤字节长度从 179 改为 187（含换行符）
- udp17F.py新增四个轮速信号的解析：WhlSpdFrntLePls、WhlSpdFrntRiPls、WhlSpdReLePls、WhlSpdReRiPls
#### 注意
- 抓数据的脚本得是新的，否则光解析工具是新的没用
- 抓的原始数据也需要遵循最新的协议：《SDA INS 以太网通讯协议格式参考_V1.9_0626》
- 坚连大佬说：抓数据的脚本得用 orig_c.c 和 cc.out ，ins也要用最新的版本

### V2.40
2023.6.20
#### 新增
- 17F 146 31B 5B3 四个信号的.py文件，新增最后一列流水号的解析

### V2.30
2023.6.19
#### 新增
- 新增udp5B3.py ，用于解析莲花同学需要的0x5B3信号
- win.py中新增按钮5B3
#### 修改
- 修改win.py的信号栏分布
- 修改进度条进度分布
#### 建议
- 研发想要解析流水号，用来分析问题出在哪，预计在V2.40实现吧（V2.40已实现）
#### 尝试
- 尝试在解析时，将按钮置灰，完成后重新置亮。（尝试失败，问题如下）
1. 如果什么信号都不勾选，点一下按钮，按钮会直接置灰并且无法恢复
2. 如果中间卡进度条，按钮也无法点击
- 尝试在解析完成后，将进度条更变样式。（尝试失败，问题如下）
1. 在win.py 198行插入下面的代码后运行，报错!
2. 进度条样式属性更变报错
```python
pb['bootstyle'] = 'info-striped'
```

### V2.20
2023.6.15
#### 新增
- udp17F.py中新增了分list机制：当该信号的log行数超过100万行时，会分list，用来解决内存不足的问题
- upd31B.py和udp146.py也加入了分list机制
- rel.py加入分list和分表的机制
- Pink Drink 粉粉生咖还挺好喝🍓
#### 修改
- 修改路径，现在默认为空，看起来简洁
#### 建议
- 研发想要解析流水号，用来分析问题出在哪，预计在V2.30实现吧

### V2.10
2023.6.11
#### 新增
- udp17F.py中新增了分表机制：当该信号的log行数超过100万行时，会自动分成多个csv
- upd31B.py和udp146.py也加入了分表机制
#### 已知缺陷
- 分表功能已初步实现，但还需要测试验证一下，可能会有bug
- 写完udp17F的分表功能以后，我突然意识到，其实真正影响运算速度的原因，并不是csv表的写入和生成
- 而是每个信号运行完成后，存储进内存的那段时间，因为列表会越来越大，而且只有该信号的全部源数据都算完了，才会开始进行写入😅
- 所以要真正解决内存问题，特别是公司的垃圾电脑，需要把列表一起分了，也是以100万行作为一个分隔点
- 至于这个分list的机制，等下次再写吧，毕竟我的披萨到了🍕（V2.20已实现）

### V2.00
2023.6.10
#### 新增
- app.py主题从morph改成了journal，新版本，新皮肤😄
- config.xlsx新建一个工作簿rel，用来生成rel.py的配置参数
- config.xlsx添加了丽敏所需的rel表所需的8个信号的信号名、起始位、位宽等信息
- config.xlsx的工作簿rel，重写了起始位：B3=B2+C2，B4=B3+C3 ...以此类推
- config.py生成rel.py的配置参数
- flier.py中新建一个函数log_rel()，用来生成rel.txt
- 新建rel.py用来生成rel.csv
- rel.py的配置参数，最后第二和最后第三的所有元素都经过互换，用于实现INS_Vehicle_SlowDr_Pitch 和 INS_Vehicle_SlowDr_Roll的列互换
- win.py添加了rel的勾选按钮
#### 已知缺陷
- rel功能已初步实现，但还需要测试验证一下
- 目前rel表的生成中，存在一个问题暂时无法规避：若17F和146帧数不一致，则导致函数报错，暂未想到补帧策略

### v1.41
2023.6.9
- 进排查只是数据量太大，造成卡进度条的假象，实际是在处理数据
- 丽敏同学建议：结合17F和146做一个输出rel.csv的功能
- 小铭我想做一个按钮的状态：当工具在运算数据时，按钮置灰状态，运算完成后恢复可点击状态

### v1.40
2023.6.9
- 莲花同学发现还是有卡进度条的问题，这次是146的信号，ε＝ε＝ε＝(#>д<)ﾉ
- 初步判断还是数据的问题，看来容错机制只有字符长度的判断还不够

### v1.30  
2023.6.8
- flier.py添加了容错机制，并将不满足条件的行输出在error_log.txt
- 修复了log中长度不够的行会导致卡进度条的问题，感谢坚莲大佬和莲花同学的发现🤣

### v1.26
2023.6.7
- 找当真正原因：log_17F.txt文件中长度不够的行造成的，正在构思容错机制
- 丽敏同学提出容错机制：添加判断17F信号每行的长度，如果不满足则跳过，我觉得可以

### v1.25
2023.6.6
- 坚莲大佬和莲花同学都发现了，处理某些log的时候，会出现卡在17F数据处理的情况
- 初步判断是log数据的问题
- 增加udp17F.py、udp31B.py、udp146.py的调试代码

### v1.24
2023.5.30
 - 创建一个id的脚本，看看源数据有多少个id
 - 目前可以处理17f，31b，146 这3个id的数据
 - 分析得出，源数据中还有4个数据id：232，271，5b3，5b8
 - 后续会加上那4个数据的，期待吧O(∩_∩)O

### v1.23
2023.5.30   
优化代码
- 将函数从全部导入优化为指定函数导入
- 删除一些不必要的变量
- 注释了一些暂时用不上的代码
- 修复了版本号过旧的问题😂

### v1.01
2023.5.29   
- 新增一个小功能，文件可以拖入读取路径

### v1.0
2023.5.29   
- 正式封装成exe

### v0.41
2023.5.26   
- UI新增进度条，增强体验感

### v0.4
2023.5.24
- 不过还不能用，只是有了个界面
- 把function文件夹改成func

### v0.3
2023.5.18
- 进行错误的数据进行分析，发现矩阵偏移量错误（INS_Vehicle_Lat：-90）
- 解析.C文件输出的csv，经过对比分析，发现py脚本没有错误，只是小数点后几位的差异（c语言Double类型只会保留小数点后6位，而Python则没有这个问题）
- 结论：python脚本并无错误，是矩阵和.c文件的问题
- 将udp的function脚本进行def定义，方便后期调用
- 修改config配置表的偏移量错误（INS_Vehicle_Lat：-90）

### v0.21
2023.5.17
- 少丽说有些数据是错的，暂时不知道是什么原因
- 可以自动创建cache文件夹
- 可以自动创建csv文件
- 打印进度

### v0.2
2023.5.16
- 解决了表头带引号的问题
- 直接生成csv文件，并放到csv文件夹中
- 删除没用的临时文件，和测试脚本

### v0.11
2023.5.16
- 确认可以跑了
- 删除临时编译器
- 弃用类写法，效率太慢了

### v0.1
2023.5.15
- 写了一个类，实现单个数据的转换
- 一些小改动和分类
- 添加一些测试脚本
- 更正script.py的一些错误，新建save_log.py
- 读取数据长度，切片数据的测试脚本
- 上传已完成的脚本，参考的文档
